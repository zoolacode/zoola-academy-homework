{"id":"../engine/engine.js","dependencies":[{"name":"C:\\Users\\Gamid\\Desktop\\zoola_homework\\zoola-academy-homework\\js\\hw_2_js_functions_state\\package.json","includedInParent":true,"mtime":1662019673030}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createEngine = exports.ENGINE_INITIALIZE_SIGNAL = void 0;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction pipe() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    var first = fns[0],\n        rest = fns.slice(1);\n    return rest.reduce(function (acc, fn) {\n      return fn(acc);\n    }, first.apply(void 0, arguments));\n  };\n}\n\nvar createEngine = function createEngine() {\n  var sideEffects = [];\n  var state;\n  var globalReducerFn;\n\n  var reducerFns = _defineProperty({}, ENGINE_INITIALIZE_SIGNAL, function (state) {\n    return state;\n  });\n\n  var runSideEffects = function runSideEffects(_ref) {\n    var prevState = _ref.prevState,\n        state = _ref.state;\n    sideEffects = sideEffects.map(function (_ref2) {\n      var effectFn = _ref2.effectFn,\n          cleanUpFn = _ref2.cleanUpFn,\n          conditionFn = _ref2.conditionFn;\n      var nextCleanUpFn = cleanUpFn;\n\n      if (conditionFn({\n        prevState: prevState,\n        state: state\n      })) {\n        cleanUpFn === null || cleanUpFn === void 0 ? void 0 : cleanUpFn();\n        nextCleanUpFn = effectFn({\n          state: state,\n          prevState: prevState\n        }, publicEmit);\n      }\n\n      return {\n        effectFn: effectFn,\n        cleanUpFn: nextCleanUpFn,\n        conditionFn: conditionFn\n      };\n    });\n  };\n\n  var emit = function emit(signal, payload) {\n    var _globalReducerFn;\n\n    var prevState = state;\n    var stateFn = typeof reducerFns[signal] === \"function\" ? reducerFns[signal] : function (state) {\n      return state;\n    };\n    var reducerFnsWithPayload = [stateFn, (_globalReducerFn = globalReducerFn) !== null && _globalReducerFn !== void 0 ? _globalReducerFn : function (state) {\n      return state;\n    }].map(function (fn) {\n      return function (state) {\n        return fn(state, payload);\n      };\n    });\n    state = pipe.apply(void 0, _toConsumableArray(reducerFnsWithPayload))(prevState, payload);\n\n    if (state !== prevState) {\n      runSideEffects({\n        prevState: prevState,\n        state: state\n      });\n    }\n  };\n\n  var publicEmit = function publicEmit(signal, payload) {\n    // always run \"emit\" in the a Event Loop iteration to let all synchronous code complete\n    setTimeout(function () {\n      try {\n        emit(signal, payload);\n      } catch (err) {\n        logError(\"emit\", err);\n      }\n    }, 0);\n  };\n\n  return {\n    addSideEffect: function addSideEffect(_ref3) {\n      var sideEffectFn = _ref3.effect,\n          _ref3$onlyWhen = _ref3.onlyWhen,\n          onlyWhen = _ref3$onlyWhen === void 0 ? function () {\n        return true;\n      } : _ref3$onlyWhen;\n      sideEffects.push({\n        effectFn: sideEffectFn,\n        cleanUpFn: function cleanUpFn() {},\n        conditionFn: onlyWhen\n      });\n    },\n    addSignalReducer: function addSignalReducer(signal, fn) {\n      if (reducerFns[signal] && signal !== ENGINE_INITIALIZE_SIGNAL) {\n        throw new Error(\"Engine: There can be only one reducer for a given signal: \".concat(signal));\n      }\n\n      reducerFns[signal] = fn;\n    },\n    addGlobalReducer: function addGlobalReducer(fn) {\n      if (globalReducerFn) {\n        throw new Error(\"Engine: There can be only one global reducer\");\n      }\n\n      globalReducerFn = fn;\n    },\n    start: function start() {\n      emit(ENGINE_INITIALIZE_SIGNAL);\n    }\n  };\n};\n\nexports.createEngine = createEngine;\n\nfunction logError(type, err) {\n  console.log(\"Engine: \".concat(type, \" error\"));\n  console.dir(err);\n} // Initialize signal doesn't have to be a Symbol, but it's a valid use-case if you want to ensure uniqueness\n\n\nvar ENGINE_INITIALIZE_SIGNAL = Symbol(\"ENGINE_INITIALIZE_SIGNAL\");\nexports.ENGINE_INITIALIZE_SIGNAL = ENGINE_INITIALIZE_SIGNAL;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":22,"column":0},"source":"../engine/engine.js","original":{"line":1,"column":0}},{"generated":{"line":22,"column":9},"source":"../engine/engine.js","original":{"line":1,"column":9},"name":"pipe"},{"generated":{"line":22,"column":13},"source":"../engine/engine.js","original":{"line":1,"column":0}},{"generated":{"line":22,"column":16},"source":"../engine/engine.js","original":{"line":1,"column":22}},{"generated":{"line":23,"column":2},"source":"../engine/engine.js","original":{"line":1,"column":22}},{"generated":{"line":23,"column":36},"source":"../engine/engine.js","original":{"line":1,"column":17},"name":"fns"},{"generated":{"line":23,"column":39},"source":"../engine/engine.js","original":{"line":1,"column":22}},{"generated":{"line":24,"column":4},"source":"../engine/engine.js","original":{"line":1,"column":17},"name":"fns"},{"generated":{"line":24,"column":7},"source":"../engine/engine.js","original":{"line":1,"column":22}},{"generated":{"line":25,"column":2},"source":"../engine/engine.js","original":{"line":1,"column":22}},{"generated":{"line":27,"column":2},"source":"../engine/engine.js","original":{"line":2,"column":2}},{"generated":{"line":27,"column":9},"source":"../engine/engine.js","original":{"line":2,"column":9}},{"generated":{"line":27,"column":21},"source":"../engine/engine.js","original":{"line":2,"column":22}},{"generated":{"line":28,"column":4},"source":"../engine/engine.js","original":{"line":3,"column":4}},{"generated":{"line":28,"column":8},"source":"../engine/engine.js","original":{"line":3,"column":11},"name":"first"},{"generated":{"line":28,"column":13},"source":"../engine/engine.js","original":{"line":3,"column":4}},{"generated":{"line":28,"column":16},"source":"../engine/engine.js","original":{"line":3,"column":29},"name":"fns"},{"generated":{"line":28,"column":19},"source":"../engine/engine.js","original":{"line":3,"column":4}},{"generated":{"line":29,"column":4},"source":"../engine/engine.js","original":{"line":3,"column":4}},{"generated":{"line":29,"column":8},"source":"../engine/engine.js","original":{"line":3,"column":21},"name":"rest"},{"generated":{"line":29,"column":12},"source":"../engine/engine.js","original":{"line":3,"column":4}},{"generated":{"line":29,"column":15},"source":"../engine/engine.js","original":{"line":3,"column":29},"name":"fns"},{"generated":{"line":29,"column":18},"source":"../engine/engine.js","original":{"line":3,"column":4}},{"generated":{"line":30,"column":4},"source":"../engine/engine.js","original":{"line":4,"column":4}},{"generated":{"line":30,"column":11},"source":"../engine/engine.js","original":{"line":4,"column":11},"name":"rest"},{"generated":{"line":30,"column":15},"source":"../engine/engine.js","original":{"line":4,"column":15}},{"generated":{"line":30,"column":16},"source":"../engine/engine.js","original":{"line":4,"column":16},"name":"reduce"},{"generated":{"line":30,"column":22},"source":"../engine/engine.js","original":{"line":4,"column":11}},{"generated":{"line":30,"column":23},"source":"../engine/engine.js","original":{"line":4,"column":23}},{"generated":{"line":30,"column":33},"source":"../engine/engine.js","original":{"line":4,"column":24},"name":"acc"},{"generated":{"line":30,"column":36},"source":"../engine/engine.js","original":{"line":4,"column":23}},{"generated":{"line":30,"column":38},"source":"../engine/engine.js","original":{"line":4,"column":29},"name":"fn"},{"generated":{"line":30,"column":40},"source":"../engine/engine.js","original":{"line":4,"column":23}},{"generated":{"line":30,"column":42},"source":"../engine/engine.js","original":{"line":4,"column":36}},{"generated":{"line":31,"column":6},"source":"../engine/engine.js","original":{"line":5,"column":6}},{"generated":{"line":31,"column":13},"source":"../engine/engine.js","original":{"line":5,"column":13},"name":"fn"},{"generated":{"line":31,"column":15},"source":"../engine/engine.js","original":{"line":5,"column":15}},{"generated":{"line":31,"column":16},"source":"../engine/engine.js","original":{"line":5,"column":16},"name":"acc"},{"generated":{"line":31,"column":19},"source":"../engine/engine.js","original":{"line":5,"column":15}},{"generated":{"line":31,"column":20},"source":"../engine/engine.js","original":{"line":5,"column":6}},{"generated":{"line":32,"column":4},"source":"../engine/engine.js","original":{"line":6,"column":5}},{"generated":{"line":32,"column":5},"source":"../engine/engine.js","original":{"line":4,"column":11}},{"generated":{"line":32,"column":7},"source":"../engine/engine.js","original":{"line":6,"column":7},"name":"first"},{"generated":{"line":32,"column":12},"source":"../engine/engine.js","original":{"line":6,"column":12}},{"generated":{"line":32,"column":18},"source":"../engine/engine.js","original":{"line":6,"column":7}},{"generated":{"line":32,"column":37},"source":"../engine/engine.js","original":{"line":4,"column":11}},{"generated":{"line":32,"column":38},"source":"../engine/engine.js","original":{"line":4,"column":4}},{"generated":{"line":33,"column":2},"source":"../engine/engine.js","original":{"line":7,"column":3}},{"generated":{"line":33,"column":3},"source":"../engine/engine.js","original":{"line":2,"column":2}},{"generated":{"line":34,"column":0},"source":"../engine/engine.js","original":{"line":8,"column":1}},{"generated":{"line":36,"column":0},"source":"../engine/engine.js","original":{"line":10,"column":7}},{"generated":{"line":36,"column":4},"source":"../engine/engine.js","original":{"line":10,"column":13},"name":"createEngine"},{"generated":{"line":36,"column":16},"source":"../engine/engine.js","original":{"line":10,"column":25}},{"generated":{"line":36,"column":19},"source":"../engine/engine.js","original":{"line":10,"column":28}},{"generated":{"line":36,"column":28},"source":"../engine/engine.js","original":{"line":10,"column":13},"name":"createEngine"},{"generated":{"line":36,"column":40},"source":"../engine/engine.js","original":{"line":10,"column":28}},{"generated":{"line":36,"column":43},"source":"../engine/engine.js","original":{"line":10,"column":34}},{"generated":{"line":37,"column":2},"source":"../engine/engine.js","original":{"line":11,"column":2}},{"generated":{"line":37,"column":6},"source":"../engine/engine.js","original":{"line":11,"column":6},"name":"sideEffects"},{"generated":{"line":37,"column":17},"source":"../engine/engine.js","original":{"line":11,"column":17}},{"generated":{"line":37,"column":20},"source":"../engine/engine.js","original":{"line":11,"column":20}},{"generated":{"line":37,"column":22},"source":"../engine/engine.js","original":{"line":11,"column":2}},{"generated":{"line":38,"column":2},"source":"../engine/engine.js","original":{"line":13,"column":2}},{"generated":{"line":38,"column":6},"source":"../engine/engine.js","original":{"line":13,"column":6},"name":"state"},{"generated":{"line":38,"column":11},"source":"../engine/engine.js","original":{"line":13,"column":2}},{"generated":{"line":39,"column":2},"source":"../engine/engine.js","original":{"line":15,"column":2}},{"generated":{"line":39,"column":6},"source":"../engine/engine.js","original":{"line":15,"column":6},"name":"globalReducerFn"},{"generated":{"line":39,"column":21},"source":"../engine/engine.js","original":{"line":15,"column":2}},{"generated":{"line":41,"column":2},"source":"../engine/engine.js","original":{"line":17,"column":2}},{"generated":{"line":41,"column":6},"source":"../engine/engine.js","original":{"line":17,"column":8},"name":"reducerFns"},{"generated":{"line":41,"column":16},"source":"../engine/engine.js","original":{"line":17,"column":18}},{"generated":{"line":41,"column":39},"source":"../engine/engine.js","original":{"line":18,"column":5},"name":"ENGINE_INITIALIZE_SIGNAL"},{"generated":{"line":41,"column":63},"source":"../engine/engine.js","original":{"line":17,"column":18}},{"generated":{"line":41,"column":65},"source":"../engine/engine.js","original":{"line":18,"column":32}},{"generated":{"line":41,"column":75},"source":"../engine/engine.js","original":{"line":18,"column":33},"name":"state"},{"generated":{"line":41,"column":80},"source":"../engine/engine.js","original":{"line":18,"column":32}},{"generated":{"line":42,"column":4},"source":"../engine/engine.js","original":{"line":18,"column":32}},{"generated":{"line":42,"column":11},"source":"../engine/engine.js","original":{"line":18,"column":43},"name":"state"},{"generated":{"line":42,"column":16},"source":"../engine/engine.js","original":{"line":18,"column":32}},{"generated":{"line":43,"column":2},"source":"../engine/engine.js","original":{"line":18,"column":32}},{"generated":{"line":43,"column":3},"source":"../engine/engine.js","original":{"line":17,"column":18}},{"generated":{"line":43,"column":4},"source":"../engine/engine.js","original":{"line":17,"column":2}},{"generated":{"line":45,"column":2},"source":"../engine/engine.js","original":{"line":21,"column":2}},{"generated":{"line":45,"column":6},"source":"../engine/engine.js","original":{"line":21,"column":8},"name":"runSideEffects"},{"generated":{"line":45,"column":20},"source":"../engine/engine.js","original":{"line":21,"column":22}},{"generated":{"line":45,"column":23},"source":"../engine/engine.js","original":{"line":21,"column":25}},{"generated":{"line":45,"column":32},"source":"../engine/engine.js","original":{"line":21,"column":8},"name":"runSideEffects"},{"generated":{"line":45,"column":46},"source":"../engine/engine.js","original":{"line":21,"column":25}},{"generated":{"line":45,"column":53},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":46,"column":4},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":46,"column":8},"source":"../engine/engine.js","original":{"line":21,"column":28},"name":"prevState"},{"generated":{"line":46,"column":17},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":46,"column":25},"source":"../engine/engine.js","original":{"line":21,"column":28},"name":"prevState"},{"generated":{"line":46,"column":34},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":47,"column":4},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":47,"column":8},"source":"../engine/engine.js","original":{"line":21,"column":39},"name":"state"},{"generated":{"line":47,"column":13},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":47,"column":21},"source":"../engine/engine.js","original":{"line":21,"column":39},"name":"state"},{"generated":{"line":47,"column":26},"source":"../engine/engine.js","original":{"line":21,"column":51}},{"generated":{"line":48,"column":4},"source":"../engine/engine.js","original":{"line":22,"column":4},"name":"sideEffects"},{"generated":{"line":48,"column":15},"source":"../engine/engine.js","original":{"line":22,"column":15}},{"generated":{"line":48,"column":18},"source":"../engine/engine.js","original":{"line":22,"column":18},"name":"sideEffects"},{"generated":{"line":48,"column":29},"source":"../engine/engine.js","original":{"line":22,"column":29}},{"generated":{"line":48,"column":30},"source":"../engine/engine.js","original":{"line":22,"column":30},"name":"map"},{"generated":{"line":48,"column":33},"source":"../engine/engine.js","original":{"line":22,"column":18}},{"generated":{"line":48,"column":34},"source":"../engine/engine.js","original":{"line":22,"column":34}},{"generated":{"line":48,"column":51},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":49,"column":6},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":49,"column":10},"source":"../engine/engine.js","original":{"line":22,"column":37},"name":"effectFn"},{"generated":{"line":49,"column":18},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":49,"column":27},"source":"../engine/engine.js","original":{"line":22,"column":37},"name":"effectFn"},{"generated":{"line":49,"column":35},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":50,"column":6},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":50,"column":10},"source":"../engine/engine.js","original":{"line":22,"column":47},"name":"cleanUpFn"},{"generated":{"line":50,"column":19},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":50,"column":28},"source":"../engine/engine.js","original":{"line":22,"column":47},"name":"cleanUpFn"},{"generated":{"line":50,"column":37},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":51,"column":6},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":51,"column":10},"source":"../engine/engine.js","original":{"line":22,"column":58},"name":"conditionFn"},{"generated":{"line":51,"column":21},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":51,"column":30},"source":"../engine/engine.js","original":{"line":22,"column":58},"name":"conditionFn"},{"generated":{"line":51,"column":41},"source":"../engine/engine.js","original":{"line":22,"column":76}},{"generated":{"line":52,"column":6},"source":"../engine/engine.js","original":{"line":23,"column":6}},{"generated":{"line":52,"column":10},"source":"../engine/engine.js","original":{"line":23,"column":10},"name":"nextCleanUpFn"},{"generated":{"line":52,"column":23},"source":"../engine/engine.js","original":{"line":23,"column":23}},{"generated":{"line":52,"column":26},"source":"../engine/engine.js","original":{"line":23,"column":26},"name":"cleanUpFn"},{"generated":{"line":52,"column":35},"source":"../engine/engine.js","original":{"line":23,"column":6}},{"generated":{"line":54,"column":6},"source":"../engine/engine.js","original":{"line":25,"column":6}},{"generated":{"line":54,"column":10},"source":"../engine/engine.js","original":{"line":25,"column":10},"name":"conditionFn"},{"generated":{"line":54,"column":21},"source":"../engine/engine.js","original":{"line":25,"column":21}},{"generated":{"line":54,"column":22},"source":"../engine/engine.js","original":{"line":25,"column":22}},{"generated":{"line":55,"column":8},"source":"../engine/engine.js","original":{"line":25,"column":24},"name":"prevState"},{"generated":{"line":55,"column":17},"source":"../engine/engine.js","original":{"line":25,"column":33}},{"generated":{"line":55,"column":19},"source":"../engine/engine.js","original":{"line":25,"column":24},"name":"prevState"},{"generated":{"line":55,"column":28},"source":"../engine/engine.js","original":{"line":25,"column":22}},{"generated":{"line":56,"column":8},"source":"../engine/engine.js","original":{"line":25,"column":35},"name":"state"},{"generated":{"line":56,"column":13},"source":"../engine/engine.js","original":{"line":25,"column":40}},{"generated":{"line":56,"column":15},"source":"../engine/engine.js","original":{"line":25,"column":35},"name":"state"},{"generated":{"line":57,"column":6},"source":"../engine/engine.js","original":{"line":25,"column":22}},{"generated":{"line":57,"column":7},"source":"../engine/engine.js","original":{"line":25,"column":21}},{"generated":{"line":57,"column":8},"source":"../engine/engine.js","original":{"line":25,"column":6}},{"generated":{"line":57,"column":10},"source":"../engine/engine.js","original":{"line":25,"column":45}},{"generated":{"line":58,"column":8},"source":"../engine/engine.js","original":{"line":26,"column":8},"name":"cleanUpFn"},{"generated":{"line":58,"column":17},"source":"../engine/engine.js","original":{"line":26,"column":17}},{"generated":{"line":58,"column":26},"source":"../engine/engine.js","original":{"line":26,"column":8}},{"generated":{"line":58,"column":30},"source":"../engine/engine.js","original":{"line":26,"column":8},"name":"cleanUpFn"},{"generated":{"line":58,"column":39},"source":"../engine/engine.js","original":{"line":26,"column":17}},{"generated":{"line":58,"column":50},"source":"../engine/engine.js","original":{"line":26,"column":8}},{"generated":{"line":58,"column":62},"source":"../engine/engine.js","original":{"line":26,"column":8},"name":"cleanUpFn"},{"generated":{"line":58,"column":71},"source":"../engine/engine.js","original":{"line":26,"column":17}},{"generated":{"line":59,"column":8},"source":"../engine/engine.js","original":{"line":27,"column":8},"name":"nextCleanUpFn"},{"generated":{"line":59,"column":21},"source":"../engine/engine.js","original":{"line":27,"column":21}},{"generated":{"line":59,"column":24},"source":"../engine/engine.js","original":{"line":27,"column":24},"name":"effectFn"},{"generated":{"line":59,"column":32},"source":"../engine/engine.js","original":{"line":27,"column":32}},{"generated":{"line":59,"column":33},"source":"../engine/engine.js","original":{"line":27,"column":33}},{"generated":{"line":60,"column":10},"source":"../engine/engine.js","original":{"line":27,"column":35},"name":"state"},{"generated":{"line":60,"column":15},"source":"../engine/engine.js","original":{"line":27,"column":40}},{"generated":{"line":60,"column":17},"source":"../engine/engine.js","original":{"line":27,"column":35},"name":"state"},{"generated":{"line":60,"column":22},"source":"../engine/engine.js","original":{"line":27,"column":33}},{"generated":{"line":61,"column":10},"source":"../engine/engine.js","original":{"line":27,"column":42},"name":"prevState"},{"generated":{"line":61,"column":19},"source":"../engine/engine.js","original":{"line":27,"column":51}},{"generated":{"line":61,"column":21},"source":"../engine/engine.js","original":{"line":27,"column":42},"name":"prevState"},{"generated":{"line":62,"column":8},"source":"../engine/engine.js","original":{"line":27,"column":33}},{"generated":{"line":62,"column":9},"source":"../engine/engine.js","original":{"line":27,"column":32}},{"generated":{"line":62,"column":11},"source":"../engine/engine.js","original":{"line":27,"column":55},"name":"publicEmit"},{"generated":{"line":62,"column":21},"source":"../engine/engine.js","original":{"line":27,"column":32}},{"generated":{"line":62,"column":22},"source":"../engine/engine.js","original":{"line":27,"column":8}},{"generated":{"line":63,"column":6},"source":"../engine/engine.js","original":{"line":28,"column":7}},{"generated":{"line":65,"column":6},"source":"../engine/engine.js","original":{"line":30,"column":6}},{"generated":{"line":65,"column":13},"source":"../engine/engine.js","original":{"line":30,"column":13}},{"generated":{"line":66,"column":8},"source":"../engine/engine.js","original":{"line":31,"column":8},"name":"effectFn"},{"generated":{"line":66,"column":16},"source":"../engine/engine.js","original":{"line":31,"column":16}},{"generated":{"line":66,"column":18},"source":"../engine/engine.js","original":{"line":31,"column":8},"name":"effectFn"},{"generated":{"line":66,"column":26},"source":"../engine/engine.js","original":{"line":30,"column":13}},{"generated":{"line":67,"column":8},"source":"../engine/engine.js","original":{"line":32,"column":8},"name":"cleanUpFn"},{"generated":{"line":67,"column":17},"source":"../engine/engine.js","original":{"line":32,"column":17}},{"generated":{"line":67,"column":19},"source":"../engine/engine.js","original":{"line":32,"column":19},"name":"nextCleanUpFn"},{"generated":{"line":67,"column":32},"source":"../engine/engine.js","original":{"line":30,"column":13}},{"generated":{"line":68,"column":8},"source":"../engine/engine.js","original":{"line":33,"column":8},"name":"conditionFn"},{"generated":{"line":68,"column":19},"source":"../engine/engine.js","original":{"line":33,"column":19}},{"generated":{"line":68,"column":21},"source":"../engine/engine.js","original":{"line":33,"column":8},"name":"conditionFn"},{"generated":{"line":69,"column":6},"source":"../engine/engine.js","original":{"line":30,"column":13}},{"generated":{"line":69,"column":7},"source":"../engine/engine.js","original":{"line":30,"column":6}},{"generated":{"line":70,"column":4},"source":"../engine/engine.js","original":{"line":35,"column":5}},{"generated":{"line":70,"column":5},"source":"../engine/engine.js","original":{"line":22,"column":18}},{"generated":{"line":70,"column":6},"source":"../engine/engine.js","original":{"line":22,"column":4}},{"generated":{"line":71,"column":2},"source":"../engine/engine.js","original":{"line":36,"column":3}},{"generated":{"line":71,"column":3},"source":"../engine/engine.js","original":{"line":21,"column":2}},{"generated":{"line":73,"column":2},"source":"../engine/engine.js","original":{"line":38,"column":2}},{"generated":{"line":73,"column":6},"source":"../engine/engine.js","original":{"line":38,"column":8},"name":"emit"},{"generated":{"line":73,"column":10},"source":"../engine/engine.js","original":{"line":38,"column":12}},{"generated":{"line":73,"column":13},"source":"../engine/engine.js","original":{"line":38,"column":15}},{"generated":{"line":73,"column":22},"source":"../engine/engine.js","original":{"line":38,"column":8},"name":"emit"},{"generated":{"line":73,"column":26},"source":"../engine/engine.js","original":{"line":38,"column":15}},{"generated":{"line":73,"column":27},"source":"../engine/engine.js","original":{"line":38,"column":16},"name":"signal"},{"generated":{"line":73,"column":33},"source":"../engine/engine.js","original":{"line":38,"column":15}},{"generated":{"line":73,"column":35},"source":"../engine/engine.js","original":{"line":38,"column":24},"name":"payload"},{"generated":{"line":73,"column":42},"source":"../engine/engine.js","original":{"line":38,"column":15}},{"generated":{"line":73,"column":44},"source":"../engine/engine.js","original":{"line":38,"column":36}},{"generated":{"line":74,"column":4},"source":"../engine/engine.js","original":{"line":38,"column":36}},{"generated":{"line":76,"column":4},"source":"../engine/engine.js","original":{"line":39,"column":4}},{"generated":{"line":76,"column":8},"source":"../engine/engine.js","original":{"line":39,"column":8},"name":"prevState"},{"generated":{"line":76,"column":17},"source":"../engine/engine.js","original":{"line":39,"column":17}},{"generated":{"line":76,"column":20},"source":"../engine/engine.js","original":{"line":39,"column":20},"name":"state"},{"generated":{"line":76,"column":25},"source":"../engine/engine.js","original":{"line":39,"column":4}},{"generated":{"line":77,"column":4},"source":"../engine/engine.js","original":{"line":41,"column":4}},{"generated":{"line":77,"column":8},"source":"../engine/engine.js","original":{"line":41,"column":10},"name":"stateFn"},{"generated":{"line":77,"column":15},"source":"../engine/engine.js","original":{"line":41,"column":17}},{"generated":{"line":77,"column":18},"source":"../engine/engine.js","original":{"line":42,"column":6}},{"generated":{"line":77,"column":25},"source":"../engine/engine.js","original":{"line":42,"column":13},"name":"reducerFns"},{"generated":{"line":77,"column":35},"source":"../engine/engine.js","original":{"line":42,"column":23}},{"generated":{"line":77,"column":36},"source":"../engine/engine.js","original":{"line":42,"column":24},"name":"signal"},{"generated":{"line":77,"column":42},"source":"../engine/engine.js","original":{"line":42,"column":23}},{"generated":{"line":77,"column":43},"source":"../engine/engine.js","original":{"line":42,"column":6}},{"generated":{"line":77,"column":48},"source":"../engine/engine.js","original":{"line":42,"column":36}},{"generated":{"line":77,"column":58},"source":"../engine/engine.js","original":{"line":42,"column":6}},{"generated":{"line":77,"column":61},"source":"../engine/engine.js","original":{"line":43,"column":10},"name":"reducerFns"},{"generated":{"line":77,"column":71},"source":"../engine/engine.js","original":{"line":43,"column":20}},{"generated":{"line":77,"column":72},"source":"../engine/engine.js","original":{"line":43,"column":21},"name":"signal"},{"generated":{"line":77,"column":78},"source":"../engine/engine.js","original":{"line":43,"column":20}},{"generated":{"line":77,"column":79},"source":"../engine/engine.js","original":{"line":42,"column":6}},{"generated":{"line":77,"column":82},"source":"../engine/engine.js","original":{"line":44,"column":10}},{"generated":{"line":77,"column":92},"source":"../engine/engine.js","original":{"line":44,"column":11},"name":"state"},{"generated":{"line":77,"column":97},"source":"../engine/engine.js","original":{"line":44,"column":10}},{"generated":{"line":78,"column":6},"source":"../engine/engine.js","original":{"line":44,"column":10}},{"generated":{"line":78,"column":13},"source":"../engine/engine.js","original":{"line":44,"column":21},"name":"state"},{"generated":{"line":78,"column":18},"source":"../engine/engine.js","original":{"line":44,"column":10}},{"generated":{"line":79,"column":4},"source":"../engine/engine.js","original":{"line":44,"column":10}},{"generated":{"line":79,"column":5},"source":"../engine/engine.js","original":{"line":41,"column":4}},{"generated":{"line":80,"column":4},"source":"../engine/engine.js","original":{"line":46,"column":4}},{"generated":{"line":80,"column":8},"source":"../engine/engine.js","original":{"line":46,"column":10},"name":"reducerFnsWithPayload"},{"generated":{"line":80,"column":29},"source":"../engine/engine.js","original":{"line":46,"column":31}},{"generated":{"line":80,"column":32},"source":"../engine/engine.js","original":{"line":46,"column":34}},{"generated":{"line":80,"column":33},"source":"../engine/engine.js","original":{"line":47,"column":6},"name":"stateFn"},{"generated":{"line":80,"column":40},"source":"../engine/engine.js","original":{"line":46,"column":34}},{"generated":{"line":80,"column":62},"source":"../engine/engine.js","original":{"line":48,"column":6},"name":"globalReducerFn"},{"generated":{"line":80,"column":77},"source":"../engine/engine.js","original":{"line":46,"column":34}},{"generated":{"line":80,"column":140},"source":"../engine/engine.js","original":{"line":48,"column":26}},{"generated":{"line":80,"column":150},"source":"../engine/engine.js","original":{"line":48,"column":27},"name":"state"},{"generated":{"line":80,"column":155},"source":"../engine/engine.js","original":{"line":48,"column":26}},{"generated":{"line":81,"column":6},"source":"../engine/engine.js","original":{"line":48,"column":26}},{"generated":{"line":81,"column":13},"source":"../engine/engine.js","original":{"line":48,"column":37},"name":"state"},{"generated":{"line":81,"column":18},"source":"../engine/engine.js","original":{"line":48,"column":26}},{"generated":{"line":82,"column":4},"source":"../engine/engine.js","original":{"line":48,"column":26}},{"generated":{"line":82,"column":5},"source":"../engine/engine.js","original":{"line":46,"column":34}},{"generated":{"line":82,"column":7},"source":"../engine/engine.js","original":{"line":49,"column":6},"name":"map"},{"generated":{"line":82,"column":10},"source":"../engine/engine.js","original":{"line":46,"column":34}},{"generated":{"line":82,"column":11},"source":"../engine/engine.js","original":{"line":49,"column":10}},{"generated":{"line":82,"column":21},"source":"../engine/engine.js","original":{"line":49,"column":11},"name":"fn"},{"generated":{"line":82,"column":23},"source":"../engine/engine.js","original":{"line":49,"column":10}},{"generated":{"line":83,"column":6},"source":"../engine/engine.js","original":{"line":49,"column":10}},{"generated":{"line":83,"column":13},"source":"../engine/engine.js","original":{"line":49,"column":18}},{"generated":{"line":83,"column":23},"source":"../engine/engine.js","original":{"line":49,"column":19},"name":"state"},{"generated":{"line":83,"column":28},"source":"../engine/engine.js","original":{"line":49,"column":18}},{"generated":{"line":84,"column":8},"source":"../engine/engine.js","original":{"line":49,"column":18}},{"generated":{"line":84,"column":15},"source":"../engine/engine.js","original":{"line":49,"column":29},"name":"fn"},{"generated":{"line":84,"column":17},"source":"../engine/engine.js","original":{"line":49,"column":31}},{"generated":{"line":84,"column":18},"source":"../engine/engine.js","original":{"line":49,"column":32},"name":"state"},{"generated":{"line":84,"column":23},"source":"../engine/engine.js","original":{"line":49,"column":31}},{"generated":{"line":84,"column":25},"source":"../engine/engine.js","original":{"line":49,"column":39},"name":"payload"},{"generated":{"line":84,"column":32},"source":"../engine/engine.js","original":{"line":49,"column":31}},{"generated":{"line":84,"column":33},"source":"../engine/engine.js","original":{"line":49,"column":18}},{"generated":{"line":85,"column":6},"source":"../engine/engine.js","original":{"line":49,"column":18}},{"generated":{"line":85,"column":7},"source":"../engine/engine.js","original":{"line":49,"column":10}},{"generated":{"line":86,"column":4},"source":"../engine/engine.js","original":{"line":49,"column":10}},{"generated":{"line":86,"column":5},"source":"../engine/engine.js","original":{"line":46,"column":34}},{"generated":{"line":86,"column":6},"source":"../engine/engine.js","original":{"line":46,"column":4}},{"generated":{"line":87,"column":4},"source":"../engine/engine.js","original":{"line":51,"column":4},"name":"state"},{"generated":{"line":87,"column":9},"source":"../engine/engine.js","original":{"line":51,"column":9}},{"generated":{"line":87,"column":12},"source":"../engine/engine.js","original":{"line":51,"column":12},"name":"pipe"},{"generated":{"line":87,"column":16},"source":"../engine/engine.js","original":{"line":51,"column":16}},{"generated":{"line":87,"column":22},"source":"../engine/engine.js","original":{"line":51,"column":12}},{"generated":{"line":87,"column":50},"source":"../engine/engine.js","original":{"line":51,"column":20},"name":"reducerFnsWithPayload"},{"generated":{"line":87,"column":71},"source":"../engine/engine.js","original":{"line":51,"column":12}},{"generated":{"line":87,"column":74},"source":"../engine/engine.js","original":{"line":51,"column":43},"name":"prevState"},{"generated":{"line":87,"column":83},"source":"../engine/engine.js","original":{"line":51,"column":12}},{"generated":{"line":87,"column":85},"source":"../engine/engine.js","original":{"line":51,"column":54},"name":"payload"},{"generated":{"line":87,"column":92},"source":"../engine/engine.js","original":{"line":51,"column":12}},{"generated":{"line":87,"column":93},"source":"../engine/engine.js","original":{"line":51,"column":4}},{"generated":{"line":89,"column":4},"source":"../engine/engine.js","original":{"line":53,"column":4}},{"generated":{"line":89,"column":8},"source":"../engine/engine.js","original":{"line":53,"column":8},"name":"state"},{"generated":{"line":89,"column":13},"source":"../engine/engine.js","original":{"line":53,"column":13}},{"generated":{"line":89,"column":18},"source":"../engine/engine.js","original":{"line":53,"column":18},"name":"prevState"},{"generated":{"line":89,"column":27},"source":"../engine/engine.js","original":{"line":53,"column":4}},{"generated":{"line":89,"column":29},"source":"../engine/engine.js","original":{"line":53,"column":29}},{"generated":{"line":90,"column":6},"source":"../engine/engine.js","original":{"line":54,"column":6},"name":"runSideEffects"},{"generated":{"line":90,"column":20},"source":"../engine/engine.js","original":{"line":54,"column":20}},{"generated":{"line":90,"column":21},"source":"../engine/engine.js","original":{"line":54,"column":21}},{"generated":{"line":91,"column":8},"source":"../engine/engine.js","original":{"line":54,"column":23},"name":"prevState"},{"generated":{"line":91,"column":17},"source":"../engine/engine.js","original":{"line":54,"column":32}},{"generated":{"line":91,"column":19},"source":"../engine/engine.js","original":{"line":54,"column":23},"name":"prevState"},{"generated":{"line":91,"column":28},"source":"../engine/engine.js","original":{"line":54,"column":21}},{"generated":{"line":92,"column":8},"source":"../engine/engine.js","original":{"line":54,"column":34},"name":"state"},{"generated":{"line":92,"column":13},"source":"../engine/engine.js","original":{"line":54,"column":39}},{"generated":{"line":92,"column":15},"source":"../engine/engine.js","original":{"line":54,"column":34},"name":"state"},{"generated":{"line":93,"column":6},"source":"../engine/engine.js","original":{"line":54,"column":21}},{"generated":{"line":93,"column":7},"source":"../engine/engine.js","original":{"line":54,"column":20}},{"generated":{"line":93,"column":8},"source":"../engine/engine.js","original":{"line":54,"column":6}},{"generated":{"line":94,"column":4},"source":"../engine/engine.js","original":{"line":55,"column":5}},{"generated":{"line":95,"column":2},"source":"../engine/engine.js","original":{"line":56,"column":3}},{"generated":{"line":95,"column":3},"source":"../engine/engine.js","original":{"line":38,"column":2}},{"generated":{"line":97,"column":2},"source":"../engine/engine.js","original":{"line":58,"column":2}},{"generated":{"line":97,"column":6},"source":"../engine/engine.js","original":{"line":58,"column":8},"name":"publicEmit"},{"generated":{"line":97,"column":16},"source":"../engine/engine.js","original":{"line":58,"column":18}},{"generated":{"line":97,"column":19},"source":"../engine/engine.js","original":{"line":58,"column":21}},{"generated":{"line":97,"column":28},"source":"../engine/engine.js","original":{"line":58,"column":8},"name":"publicEmit"},{"generated":{"line":97,"column":38},"source":"../engine/engine.js","original":{"line":58,"column":21}},{"generated":{"line":97,"column":39},"source":"../engine/engine.js","original":{"line":58,"column":22},"name":"signal"},{"generated":{"line":97,"column":45},"source":"../engine/engine.js","original":{"line":58,"column":21}},{"generated":{"line":97,"column":47},"source":"../engine/engine.js","original":{"line":58,"column":30},"name":"payload"},{"generated":{"line":97,"column":54},"source":"../engine/engine.js","original":{"line":58,"column":21}},{"generated":{"line":97,"column":56},"source":"../engine/engine.js","original":{"line":58,"column":42}},{"generated":{"line":98,"column":4},"source":"../engine/engine.js","original":{"line":59,"column":4}},{"generated":{"line":99,"column":4},"source":"../engine/engine.js","original":{"line":60,"column":4},"name":"setTimeout"},{"generated":{"line":99,"column":14},"source":"../engine/engine.js","original":{"line":60,"column":14}},{"generated":{"line":99,"column":15},"source":"../engine/engine.js","original":{"line":60,"column":15}},{"generated":{"line":99,"column":27},"source":"../engine/engine.js","original":{"line":60,"column":21}},{"generated":{"line":100,"column":6},"source":"../engine/engine.js","original":{"line":61,"column":6}},{"generated":{"line":100,"column":10},"source":"../engine/engine.js","original":{"line":61,"column":10}},{"generated":{"line":101,"column":8},"source":"../engine/engine.js","original":{"line":62,"column":8},"name":"emit"},{"generated":{"line":101,"column":12},"source":"../engine/engine.js","original":{"line":62,"column":12}},{"generated":{"line":101,"column":13},"source":"../engine/engine.js","original":{"line":62,"column":13},"name":"signal"},{"generated":{"line":101,"column":19},"source":"../engine/engine.js","original":{"line":62,"column":12}},{"generated":{"line":101,"column":21},"source":"../engine/engine.js","original":{"line":62,"column":21},"name":"payload"},{"generated":{"line":101,"column":28},"source":"../engine/engine.js","original":{"line":62,"column":12}},{"generated":{"line":101,"column":29},"source":"../engine/engine.js","original":{"line":62,"column":8}},{"generated":{"line":102,"column":6},"source":"../engine/engine.js","original":{"line":63,"column":7}},{"generated":{"line":102,"column":7},"source":"../engine/engine.js","original":{"line":61,"column":6}},{"generated":{"line":102,"column":8},"source":"../engine/engine.js","original":{"line":63,"column":8}},{"generated":{"line":102,"column":15},"source":"../engine/engine.js","original":{"line":63,"column":15},"name":"err"},{"generated":{"line":102,"column":18},"source":"../engine/engine.js","original":{"line":63,"column":8}},{"generated":{"line":102,"column":20},"source":"../engine/engine.js","original":{"line":63,"column":20}},{"generated":{"line":103,"column":8},"source":"../engine/engine.js","original":{"line":64,"column":8},"name":"logError"},{"generated":{"line":103,"column":16},"source":"../engine/engine.js","original":{"line":64,"column":16}},{"generated":{"line":103,"column":17},"source":"../engine/engine.js","original":{"line":64,"column":17}},{"generated":{"line":103,"column":23},"source":"../engine/engine.js","original":{"line":64,"column":16}},{"generated":{"line":103,"column":25},"source":"../engine/engine.js","original":{"line":64,"column":25},"name":"err"},{"generated":{"line":103,"column":28},"source":"../engine/engine.js","original":{"line":64,"column":16}},{"generated":{"line":103,"column":29},"source":"../engine/engine.js","original":{"line":64,"column":8}},{"generated":{"line":104,"column":6},"source":"../engine/engine.js","original":{"line":65,"column":7}},{"generated":{"line":105,"column":4},"source":"../engine/engine.js","original":{"line":66,"column":5}},{"generated":{"line":105,"column":5},"source":"../engine/engine.js","original":{"line":60,"column":14}},{"generated":{"line":105,"column":7},"source":"../engine/engine.js","original":{"line":66,"column":7}},{"generated":{"line":105,"column":8},"source":"../engine/engine.js","original":{"line":60,"column":14}},{"generated":{"line":105,"column":9},"source":"../engine/engine.js","original":{"line":60,"column":4}},{"generated":{"line":106,"column":2},"source":"../engine/engine.js","original":{"line":67,"column":3}},{"generated":{"line":106,"column":3},"source":"../engine/engine.js","original":{"line":58,"column":2}},{"generated":{"line":108,"column":2},"source":"../engine/engine.js","original":{"line":69,"column":2}},{"generated":{"line":108,"column":9},"source":"../engine/engine.js","original":{"line":69,"column":9}},{"generated":{"line":109,"column":4},"source":"../engine/engine.js","original":{"line":70,"column":4},"name":"addSideEffect"},{"generated":{"line":109,"column":17},"source":"../engine/engine.js","original":{"line":70,"column":17}},{"generated":{"line":109,"column":19},"source":"../engine/engine.js","original":{"line":70,"column":19}},{"generated":{"line":109,"column":49},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":110,"column":6},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":110,"column":10},"source":"../engine/engine.js","original":{"line":70,"column":30},"name":"sideEffectFn"},{"generated":{"line":110,"column":22},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":110,"column":31},"source":"../engine/engine.js","original":{"line":70,"column":22},"name":"effect"},{"generated":{"line":110,"column":37},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":111,"column":6},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":111,"column":33},"source":"../engine/engine.js","original":{"line":70,"column":44},"name":"onlyWhen"},{"generated":{"line":111,"column":41},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":112,"column":6},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":112,"column":10},"source":"../engine/engine.js","original":{"line":70,"column":44},"name":"onlyWhen"},{"generated":{"line":112,"column":18},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":112,"column":49},"source":"../engine/engine.js","original":{"line":70,"column":55}},{"generated":{"line":113,"column":8},"source":"../engine/engine.js","original":{"line":70,"column":55}},{"generated":{"line":113,"column":15},"source":"../engine/engine.js","original":{"line":70,"column":61}},{"generated":{"line":113,"column":19},"source":"../engine/engine.js","original":{"line":70,"column":55}},{"generated":{"line":114,"column":6},"source":"../engine/engine.js","original":{"line":70,"column":55}},{"generated":{"line":114,"column":7},"source":"../engine/engine.js","original":{"line":70,"column":72}},{"generated":{"line":115,"column":6},"source":"../engine/engine.js","original":{"line":71,"column":6},"name":"sideEffects"},{"generated":{"line":115,"column":17},"source":"../engine/engine.js","original":{"line":71,"column":17}},{"generated":{"line":115,"column":18},"source":"../engine/engine.js","original":{"line":71,"column":18},"name":"push"},{"generated":{"line":115,"column":22},"source":"../engine/engine.js","original":{"line":71,"column":6}},{"generated":{"line":115,"column":23},"source":"../engine/engine.js","original":{"line":71,"column":23}},{"generated":{"line":116,"column":8},"source":"../engine/engine.js","original":{"line":72,"column":8},"name":"effectFn"},{"generated":{"line":116,"column":16},"source":"../engine/engine.js","original":{"line":72,"column":16}},{"generated":{"line":116,"column":18},"source":"../engine/engine.js","original":{"line":72,"column":18},"name":"sideEffectFn"},{"generated":{"line":116,"column":30},"source":"../engine/engine.js","original":{"line":71,"column":23}},{"generated":{"line":117,"column":8},"source":"../engine/engine.js","original":{"line":73,"column":8},"name":"cleanUpFn"},{"generated":{"line":117,"column":17},"source":"../engine/engine.js","original":{"line":73,"column":17}},{"generated":{"line":117,"column":19},"source":"../engine/engine.js","original":{"line":73,"column":19}},{"generated":{"line":117,"column":40},"source":"../engine/engine.js","original":{"line":73,"column":25}},{"generated":{"line":117,"column":41},"source":"../engine/engine.js","original":{"line":73,"column":27}},{"generated":{"line":117,"column":42},"source":"../engine/engine.js","original":{"line":71,"column":23}},{"generated":{"line":118,"column":8},"source":"../engine/engine.js","original":{"line":74,"column":8},"name":"conditionFn"},{"generated":{"line":118,"column":19},"source":"../engine/engine.js","original":{"line":74,"column":19}},{"generated":{"line":118,"column":21},"source":"../engine/engine.js","original":{"line":74,"column":21},"name":"onlyWhen"},{"generated":{"line":119,"column":6},"source":"../engine/engine.js","original":{"line":71,"column":23}},{"generated":{"line":119,"column":7},"source":"../engine/engine.js","original":{"line":71,"column":6}},{"generated":{"line":120,"column":4},"source":"../engine/engine.js","original":{"line":76,"column":5}},{"generated":{"line":120,"column":5},"source":"../engine/engine.js","original":{"line":69,"column":9}},{"generated":{"line":121,"column":4},"source":"../engine/engine.js","original":{"line":77,"column":4},"name":"addSignalReducer"},{"generated":{"line":121,"column":20},"source":"../engine/engine.js","original":{"line":77,"column":20}},{"generated":{"line":121,"column":22},"source":"../engine/engine.js","original":{"line":77,"column":22}},{"generated":{"line":121,"column":48},"source":"../engine/engine.js","original":{"line":77,"column":23},"name":"signal"},{"generated":{"line":121,"column":54},"source":"../engine/engine.js","original":{"line":77,"column":22}},{"generated":{"line":121,"column":56},"source":"../engine/engine.js","original":{"line":77,"column":31},"name":"fn"},{"generated":{"line":121,"column":58},"source":"../engine/engine.js","original":{"line":77,"column":22}},{"generated":{"line":121,"column":60},"source":"../engine/engine.js","original":{"line":77,"column":38}},{"generated":{"line":122,"column":6},"source":"../engine/engine.js","original":{"line":78,"column":6}},{"generated":{"line":122,"column":10},"source":"../engine/engine.js","original":{"line":78,"column":10},"name":"reducerFns"},{"generated":{"line":122,"column":20},"source":"../engine/engine.js","original":{"line":78,"column":20}},{"generated":{"line":122,"column":21},"source":"../engine/engine.js","original":{"line":78,"column":21},"name":"signal"},{"generated":{"line":122,"column":27},"source":"../engine/engine.js","original":{"line":78,"column":20}},{"generated":{"line":122,"column":28},"source":"../engine/engine.js","original":{"line":78,"column":10}},{"generated":{"line":122,"column":32},"source":"../engine/engine.js","original":{"line":78,"column":32},"name":"signal"},{"generated":{"line":122,"column":38},"source":"../engine/engine.js","original":{"line":78,"column":38}},{"generated":{"line":122,"column":43},"source":"../engine/engine.js","original":{"line":78,"column":43},"name":"ENGINE_INITIALIZE_SIGNAL"},{"generated":{"line":122,"column":67},"source":"../engine/engine.js","original":{"line":78,"column":6}},{"generated":{"line":122,"column":69},"source":"../engine/engine.js","original":{"line":78,"column":69}},{"generated":{"line":123,"column":8},"source":"../engine/engine.js","original":{"line":79,"column":8}},{"generated":{"line":123,"column":14},"source":"../engine/engine.js","original":{"line":79,"column":14}},{"generated":{"line":123,"column":18},"source":"../engine/engine.js","original":{"line":79,"column":18},"name":"Error"},{"generated":{"line":123,"column":23},"source":"../engine/engine.js","original":{"line":79,"column":14}},{"generated":{"line":123,"column":92},"source":"../engine/engine.js","original":{"line":80,"column":71},"name":"signal"},{"generated":{"line":123,"column":98},"source":"../engine/engine.js","original":{"line":79,"column":14}},{"generated":{"line":123,"column":100},"source":"../engine/engine.js","original":{"line":79,"column":8}},{"generated":{"line":124,"column":6},"source":"../engine/engine.js","original":{"line":82,"column":7}},{"generated":{"line":126,"column":6},"source":"../engine/engine.js","original":{"line":83,"column":6},"name":"reducerFns"},{"generated":{"line":126,"column":16},"source":"../engine/engine.js","original":{"line":83,"column":16}},{"generated":{"line":126,"column":17},"source":"../engine/engine.js","original":{"line":83,"column":17},"name":"signal"},{"generated":{"line":126,"column":23},"source":"../engine/engine.js","original":{"line":83,"column":16}},{"generated":{"line":126,"column":24},"source":"../engine/engine.js","original":{"line":83,"column":6}},{"generated":{"line":126,"column":27},"source":"../engine/engine.js","original":{"line":83,"column":27},"name":"fn"},{"generated":{"line":126,"column":29},"source":"../engine/engine.js","original":{"line":83,"column":6}},{"generated":{"line":127,"column":4},"source":"../engine/engine.js","original":{"line":84,"column":5}},{"generated":{"line":127,"column":5},"source":"../engine/engine.js","original":{"line":69,"column":9}},{"generated":{"line":128,"column":4},"source":"../engine/engine.js","original":{"line":85,"column":4},"name":"addGlobalReducer"},{"generated":{"line":128,"column":20},"source":"../engine/engine.js","original":{"line":85,"column":20}},{"generated":{"line":128,"column":22},"source":"../engine/engine.js","original":{"line":85,"column":22}},{"generated":{"line":128,"column":48},"source":"../engine/engine.js","original":{"line":85,"column":23},"name":"fn"},{"generated":{"line":128,"column":50},"source":"../engine/engine.js","original":{"line":85,"column":22}},{"generated":{"line":128,"column":52},"source":"../engine/engine.js","original":{"line":85,"column":30}},{"generated":{"line":129,"column":6},"source":"../engine/engine.js","original":{"line":86,"column":6}},{"generated":{"line":129,"column":10},"source":"../engine/engine.js","original":{"line":86,"column":10},"name":"globalReducerFn"},{"generated":{"line":129,"column":25},"source":"../engine/engine.js","original":{"line":86,"column":6}},{"generated":{"line":129,"column":27},"source":"../engine/engine.js","original":{"line":86,"column":27}},{"generated":{"line":130,"column":8},"source":"../engine/engine.js","original":{"line":87,"column":8}},{"generated":{"line":130,"column":14},"source":"../engine/engine.js","original":{"line":87,"column":14}},{"generated":{"line":130,"column":18},"source":"../engine/engine.js","original":{"line":87,"column":18},"name":"Error"},{"generated":{"line":130,"column":23},"source":"../engine/engine.js","original":{"line":87,"column":14}},{"generated":{"line":130,"column":24},"source":"../engine/engine.js","original":{"line":87,"column":24}},{"generated":{"line":130,"column":70},"source":"../engine/engine.js","original":{"line":87,"column":14}},{"generated":{"line":130,"column":71},"source":"../engine/engine.js","original":{"line":87,"column":8}},{"generated":{"line":131,"column":6},"source":"../engine/engine.js","original":{"line":88,"column":7}},{"generated":{"line":133,"column":6},"source":"../engine/engine.js","original":{"line":89,"column":6},"name":"globalReducerFn"},{"generated":{"line":133,"column":21},"source":"../engine/engine.js","original":{"line":89,"column":21}},{"generated":{"line":133,"column":24},"source":"../engine/engine.js","original":{"line":89,"column":24},"name":"fn"},{"generated":{"line":133,"column":26},"source":"../engine/engine.js","original":{"line":89,"column":6}},{"generated":{"line":134,"column":4},"source":"../engine/engine.js","original":{"line":90,"column":5}},{"generated":{"line":134,"column":5},"source":"../engine/engine.js","original":{"line":69,"column":9}},{"generated":{"line":135,"column":4},"source":"../engine/engine.js","original":{"line":91,"column":4},"name":"start"},{"generated":{"line":135,"column":9},"source":"../engine/engine.js","original":{"line":91,"column":9}},{"generated":{"line":135,"column":11},"source":"../engine/engine.js","original":{"line":91,"column":11}},{"generated":{"line":135,"column":28},"source":"../engine/engine.js","original":{"line":91,"column":23}},{"generated":{"line":136,"column":6},"source":"../engine/engine.js","original":{"line":92,"column":6},"name":"emit"},{"generated":{"line":136,"column":10},"source":"../engine/engine.js","original":{"line":92,"column":10}},{"generated":{"line":136,"column":11},"source":"../engine/engine.js","original":{"line":92,"column":11},"name":"ENGINE_INITIALIZE_SIGNAL"},{"generated":{"line":136,"column":35},"source":"../engine/engine.js","original":{"line":92,"column":10}},{"generated":{"line":136,"column":36},"source":"../engine/engine.js","original":{"line":92,"column":6}},{"generated":{"line":137,"column":4},"source":"../engine/engine.js","original":{"line":93,"column":5}},{"generated":{"line":138,"column":2},"source":"../engine/engine.js","original":{"line":69,"column":9}},{"generated":{"line":138,"column":3},"source":"../engine/engine.js","original":{"line":69,"column":2}},{"generated":{"line":139,"column":0},"source":"../engine/engine.js","original":{"line":95,"column":1}},{"generated":{"line":139,"column":1},"source":"../engine/engine.js","original":{"line":10,"column":7}},{"generated":{"line":143,"column":0},"source":"../engine/engine.js","original":{"line":97,"column":0}},{"generated":{"line":143,"column":9},"source":"../engine/engine.js","original":{"line":97,"column":9},"name":"logError"},{"generated":{"line":143,"column":17},"source":"../engine/engine.js","original":{"line":97,"column":0}},{"generated":{"line":143,"column":18},"source":"../engine/engine.js","original":{"line":97,"column":18},"name":"type"},{"generated":{"line":143,"column":22},"source":"../engine/engine.js","original":{"line":97,"column":0}},{"generated":{"line":143,"column":24},"source":"../engine/engine.js","original":{"line":97,"column":24},"name":"err"},{"generated":{"line":143,"column":27},"source":"../engine/engine.js","original":{"line":97,"column":0}},{"generated":{"line":143,"column":29},"source":"../engine/engine.js","original":{"line":97,"column":29}},{"generated":{"line":144,"column":2},"source":"../engine/engine.js","original":{"line":98,"column":2},"name":"console"},{"generated":{"line":144,"column":9},"source":"../engine/engine.js","original":{"line":98,"column":9}},{"generated":{"line":144,"column":10},"source":"../engine/engine.js","original":{"line":98,"column":10},"name":"log"},{"generated":{"line":144,"column":13},"source":"../engine/engine.js","original":{"line":98,"column":2}},{"generated":{"line":144,"column":32},"source":"../engine/engine.js","original":{"line":98,"column":25},"name":"type"},{"generated":{"line":144,"column":36},"source":"../engine/engine.js","original":{"line":98,"column":2}},{"generated":{"line":145,"column":2},"source":"../engine/engine.js","original":{"line":99,"column":2},"name":"console"},{"generated":{"line":145,"column":9},"source":"../engine/engine.js","original":{"line":99,"column":9}},{"generated":{"line":145,"column":10},"source":"../engine/engine.js","original":{"line":99,"column":10},"name":"dir"},{"generated":{"line":145,"column":13},"source":"../engine/engine.js","original":{"line":99,"column":2}},{"generated":{"line":145,"column":14},"source":"../engine/engine.js","original":{"line":99,"column":14},"name":"err"},{"generated":{"line":145,"column":17},"source":"../engine/engine.js","original":{"line":99,"column":2}},{"generated":{"line":146,"column":0},"source":"../engine/engine.js","original":{"line":100,"column":1}},{"generated":{"line":146,"column":2},"source":"../engine/engine.js","original":{"line":102,"column":0}},{"generated":{"line":149,"column":0},"source":"../engine/engine.js","original":{"line":103,"column":7}},{"generated":{"line":149,"column":4},"source":"../engine/engine.js","original":{"line":103,"column":13},"name":"ENGINE_INITIALIZE_SIGNAL"},{"generated":{"line":149,"column":28},"source":"../engine/engine.js","original":{"line":103,"column":37}},{"generated":{"line":149,"column":31},"source":"../engine/engine.js","original":{"line":103,"column":40},"name":"Symbol"},{"generated":{"line":149,"column":37},"source":"../engine/engine.js","original":{"line":103,"column":46}},{"generated":{"line":149,"column":38},"source":"../engine/engine.js","original":{"line":103,"column":47}},{"generated":{"line":149,"column":64},"source":"../engine/engine.js","original":{"line":103,"column":46}},{"generated":{"line":149,"column":65},"source":"../engine/engine.js","original":{"line":103,"column":7}}],"sources":{"../engine/engine.js":"function pipe(...fns) {\r\n  return (...args) => {\r\n    const [first, ...rest] = fns;\r\n    return rest.reduce((acc, fn) => {\r\n      return fn(acc);\r\n    }, first(...args));\r\n  };\r\n}\r\n\r\nexport const createEngine = () => {\r\n  let sideEffects = [];\r\n\r\n  let state;\r\n\r\n  let globalReducerFn;\r\n\r\n  const reducerFns = {\r\n    [ENGINE_INITIALIZE_SIGNAL]: (state) => state,\r\n  };\r\n\r\n  const runSideEffects = ({ prevState, state }) => {\r\n    sideEffects = sideEffects.map(({ effectFn, cleanUpFn, conditionFn }) => {\r\n      let nextCleanUpFn = cleanUpFn;\r\n\r\n      if (conditionFn({ prevState, state })) {\r\n        cleanUpFn?.();\r\n        nextCleanUpFn = effectFn({ state, prevState }, publicEmit);\r\n      }\r\n\r\n      return {\r\n        effectFn,\r\n        cleanUpFn: nextCleanUpFn,\r\n        conditionFn,\r\n      };\r\n    });\r\n  };\r\n\r\n  const emit = (signal, payload) => {\r\n    let prevState = state;\r\n\r\n    const stateFn =\r\n      typeof reducerFns[signal] === \"function\"\r\n        ? reducerFns[signal]\r\n        : (state) => state;\r\n\r\n    const reducerFnsWithPayload = [\r\n      stateFn,\r\n      globalReducerFn ?? ((state) => state),\r\n    ].map((fn) => (state) => fn(state, payload));\r\n\r\n    state = pipe(...reducerFnsWithPayload)(prevState, payload);\r\n\r\n    if (state !== prevState) {\r\n      runSideEffects({ prevState, state });\r\n    }\r\n  };\r\n\r\n  const publicEmit = (signal, payload) => {\r\n    // always run \"emit\" in the a Event Loop iteration to let all synchronous code complete\r\n    setTimeout(() => {\r\n      try {\r\n        emit(signal, payload);\r\n      } catch (err) {\r\n        logError(\"emit\", err);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  return {\r\n    addSideEffect: ({ effect: sideEffectFn, onlyWhen = () => true }) => {\r\n      sideEffects.push({\r\n        effectFn: sideEffectFn,\r\n        cleanUpFn: () => {},\r\n        conditionFn: onlyWhen,\r\n      });\r\n    },\r\n    addSignalReducer: (signal, fn) => {\r\n      if (reducerFns[signal] && signal !== ENGINE_INITIALIZE_SIGNAL) {\r\n        throw new Error(\r\n          `Engine: There can be only one reducer for a given signal: ${signal}`\r\n        );\r\n      }\r\n      reducerFns[signal] = fn;\r\n    },\r\n    addGlobalReducer: (fn) => {\r\n      if (globalReducerFn) {\r\n        throw new Error(\"Engine: There can be only one global reducer\");\r\n      }\r\n      globalReducerFn = fn;\r\n    },\r\n    start: function () {\r\n      emit(ENGINE_INITIALIZE_SIGNAL);\r\n    },\r\n  };\r\n};\r\n\r\nfunction logError(type, err) {\r\n  console.log(`Engine: ${type} error`);\r\n  console.dir(err);\r\n}\r\n\r\n// Initialize signal doesn't have to be a Symbol, but it's a valid use-case if you want to ensure uniqueness\r\nexport const ENGINE_INITIALIZE_SIGNAL = Symbol(\"ENGINE_INITIALIZE_SIGNAL\");\r\n"},"lineCount":null}},"error":null,"hash":"1417c3a181b0ecc27ee624535dfe5671","cacheData":{"env":{}}}