{"mappings":"AAAA,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,AAAC;AACtD,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,AAAC;AAExD,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,AAAC;AACnD,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,AAAC;AACjD,MAAM,WAAW,GAAG,EAAE,AAAC;AAEvB,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,CAAE;IAChC,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,AAAC;IACzC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC;IAC1B,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;CAE/B;AAED,MAAM,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC,MAAM,AAAC;AAC/C,MAAM,QAAQ,GAAG,CAAC,AAAC;AACnB,MAAM,aAAa,GAAG,CAAC,AAAC;AACxB,MAAM,WAAW,GAAG,CAAC,AAAC;AACtB,MAAM,eAAe,GAAG,CAAC,AAAC;AAC1B,MAAM,UAAU,GAAG,EAAE,AAAC;AAEtB,IAAI,gBAAgB,GAAG,IAAI,AAAC;AAE5B,wGAEG,CACH,IAAI,iBAAiB,GAAG,IAAI,AAAC;AAC7B,uCAEG,CACH,IAAI,YAAY,AAAC;AACjB,oCAEG,CAEH,IAAI,aAAa,GAAG,CAAC,AAAC;AACtB,IAAI,qBAAqB,GAAG,GAAG,AAAC;AAEhC,IAAI,WAAW,AAAC;AAEhB,IAAI,UAAU,AAAC;AAEf,SAAS,WAAW,CAAC,CAAC,EAAC;IACrB,qBAAqB,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;CACxC;AAGD,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAC,WAAW,CAAC,CAAC;AAC9C,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAC,SAAS,CAAC,CAAC;AAEhD,SAAS,SAAS,GAAG;IAEnB,iBAAiB,GAAG,IAAI,CAAC;IACzB,YAAY,GAAG,CAAC;IAChB,cAAc,CAAC,SAAS,GAAG,YAAY,CAAC;IACxC,UAAU,GAAG,WAAW,CAAC,gBAAgB,EAAE,qBAAqB,CAAC,CAAC;CAEnE;AAGD,SAAS,QAAQ,GAAG;IAClB,MAAM,IAAI,CAAC;QACT,QAAQ,GAAG,eAAe,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QACzC,IAAG,WAAW,KAAK,QAAQ,EACzB,OAAO,QAAQ,CAAC;KAEnB;CAEF;AAID,SAAS,iBAAiB,CAAC,YAAY,EAAE,QAAQ,EAAE;IACjD,IAAG,YAAY,IAAI,UAAU,IAAI,YAAY,IAAI,CAAC,UAAU,EAC1D,QAAQ,CAAC,aAAa,CAAC,CAAC;SAE1B;QACE,YAAY,EAAE;QACd,OAAO,UAAU,GAAG,WAAW,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;KACzD;CAEF;AAED,SAAS,gBAAgB,GAAG;IAE1B,+LAGG,CACH,IAAI,iBAAiB,EACnB,iBAAiB,EAAE,CAAC;IAGtB,WAAW,GAAG,QAAQ,EAAE;IACxB,aAAa,GAAG,aAAa,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;IAEpD,OAAO,EAAE,CAAC;IAEV,gBAAgB,EAAE,CAAC;IAEnB,IAAI,aAAa,EAAE;QACjB,iBAAiB,GAAG,eAAe,CAAC,aAAa,CAAC,CAAC;QACnD,gBAAgB,GAAG,KAAK,CAAC;KAC1B;IACD,cAAc,CAAC,SAAS,GAAG,YAAY,CAAC;IAGxC,IAAI,YAAY,IAAI,UAAU,IAAI,YAAY,IAAI,CAAC,UAAU,EAC3D,QAAQ,CAAC,aAAa,CAAC,CAAC;CAI3B;AAGD,SAAS,WAAW,CAAC,CAAC,EAAC;IACnB,IAAG,CAAC,CAAC,MAAM,IAAI,aAAa,IAAI,CAAC,CAAC,MAAM,IAAI,QAAQ,EAAC;QACjD,YAAY,IAAI,QAAQ,CAAC;QACzB,cAAc,CAAC,SAAS,GAAG,YAAY,CAAC;KAC3C,MAAM,IAAI,CAAC,CAAC,MAAM,IAAI,aAAa,IAAI,CAAC,CAAC,MAAM,IAAI,aAAa,EAAC;QAC9D,YAAY,IAAI,aAAa,CAAC;QAC9B,cAAc,CAAC,SAAS,GAAG,YAAY,CAAC;KAE3C;IACG,gBAAgB,EAAE,CAAC;IACnB,gBAAgB,GAAG,IAAI,CAAC;IAExB,aAAa,CAAC,UAAU,CAAC,CAAC;IAC1B,iBAAiB,CAAC,gBAAgB,EAAC,qBAAqB,CAAC,CAAC;CAE7D;AAEL,SAAS,mBAAmB,CAAC,CAAC,EAAE;IAC5B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,mBAAmB,CAAC,EAAE;QACxC,YAAY,IAAI,eAAe,CAAC;QAChC,cAAc,CAAC,SAAS,GAAG,YAAY,CAAC;KAEvC;CACJ;AAEL,SAAS,OAAO,GAAE;IACd,IAAG,CAAC,gBAAgB,EAAC;QACrB,YAAY,IAAI,WAAW,CAAC;QAC5B,cAAc,CAAC,SAAS,GAAG,YAAY,CAAC;KACpC;CACH;AAGL,SAAS,gBAAgB,GAAE;IACpB,IAAG,YAAY,GAAG,CAAC,EAClB,cAAc,CAAC,KAAK,CAAC,eAAe,GAAG,SAAS;SAEhD,cAAc,CAAC,KAAK,CAAC,eAAe,GAAG,SAAS;CAEpD;AAGJ,SAAS,eAAe,CAAC,OAAO,EAAE;IAChC,MAAM,OAAO,GAAG,kBAAkB,EAAE,AAAC;IACrC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;IACnD,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;IAC/C,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAC,mBAAmB,CAAC,CAAC;IAG5D,qUAIG,CACH,OAAO,SAAS,WAAW,GAAG;QAC5B,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;KAGvD,CAAC;CACH;AAED,oHAEG,CACH,SAAS,eAAe,CAAC,GAAG,EAAE;IAC5B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;CAC7C;AAGD,SAAS,kBAAkB,GAAG;IAC5B,MAAM,QAAQ,GAAG;QACf,oBAAoB;QACpB,oBAAoB;QACpB,oBAAoB;KACrB,AAAC;IACF,OAAO,QAAQ,CAAC,eAAe,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;CAClE;AAID,SAAS,QAAQ,CAAC,OAAO,EAAG;IACpB,KAAK,CAAC,WAAW,CAAC;IAClB,iBAAiB,EAAE,CAAC;IACpB,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAC,WAAW,CAAC,CAAC;IACjD,aAAa,CAAC,mBAAmB,CAAC,OAAO,EAAC,mBAAmB,CAAC,CAAC;IAC/D,aAAa,CAAC,UAAU,CAAC,CAAC;CAEjC","sources":["src/app.js"],"sourcesContent":["const meshContainer = document.querySelector(\".mesh\");\r\nconst scoreContainer = document.querySelector(\".score\");\r\n\r\nconst startButton = document.querySelector(\".btn\");\r\nconst select = document.querySelector('.select');\r\nconst itemsAmount = 25;\r\n\r\nfor(let i = 0; i < itemsAmount; i++) {\r\n     var item = document.createElement(\"div\");\r\n     item.classList.add('item')\r\n     meshContainer.append(item);\r\n     \r\n}\r\n\r\nconst meshSize = meshContainer.children.length;\r\nconst oneClick = 1;\r\nconst multipleClick = 2;\r\nconst missedClick = 5;\r\nconst clickOutElement = 3;\r\nconst finalScore = 20;\r\n\r\nvar isElementClicked = true;\r\n\r\n/**\r\n * @description A function to be executed after each game iteration, is set to null by default\r\n */\r\nlet deactivateElement = null;\r\n/**\r\n * @description Current score\r\n */\r\nlet currentScore;\r\n/**\r\n * @description Game speed\r\n */\r\n\r\nlet activeElement = 0;\r\nlet gameIterationDuration = 500;\r\n\r\nlet randomIndex;\r\n\r\nvar intervalID;\r\n\r\nfunction chooseSpeed(e){\r\n  gameIterationDuration = e.target.value;\r\n}\r\n\r\n\r\nselect.addEventListener('change',chooseSpeed);\r\nstartButton.addEventListener('click',startGame);\r\n\r\nfunction startGame() {\r\n \r\n  deactivateElement = null;\r\n  currentScore = 0\r\n  scoreContainer.innerText = currentScore;\r\n  intervalID = setInterval(runGameIteration, gameIterationDuration);\r\n   \r\n}\r\n\r\n\r\nfunction getIndex() {\r\n  while(true){\r\n    newIndex = getRandomNumber(meshSize - 1);\r\n    if(randomIndex !== newIndex) {\r\n      return newIndex;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n \r\nfunction immediateInterval(gameFunction, interval) {\r\n  if(currentScore >= finalScore || currentScore <= -finalScore){\r\n    stopGame(activeElement);\r\n  } else \r\n  {\r\n    gameFunction()\r\n    return intervalID = setInterval(gameFunction, interval);\r\n  }\r\n    \r\n}\r\n\r\nfunction runGameIteration() {\r\n   \r\n  /**\r\n   * Alternatively, this could be written like following: deactivateElement?.()\r\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining\r\n   */\r\n  if (deactivateElement) {\r\n    deactivateElement();\r\n  }\r\n\r\n  randomIndex = getIndex()\r\n  activeElement = meshContainer.children[randomIndex];\r\n\r\n  noClick();\r\n\r\n  changeColorScore();\r\n\r\n  if (activeElement) {\r\n    deactivateElement = activateElement(activeElement);\r\n    isElementClicked = false;\r\n  }\r\n  scoreContainer.innerText = currentScore;\r\n\r\n  \r\n  if (currentScore >= finalScore || currentScore <= -finalScore) {\r\n    stopGame(activeElement);\r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\nfunction clickHandle(e){\r\n    if(e.target == activeElement && e.detail == oneClick){  \r\n        currentScore += oneClick;\r\n        scoreContainer.innerText = currentScore;\r\n    } else if (e.target == activeElement && e.detail >= multipleClick){\r\n        currentScore -= multipleClick;\r\n        scoreContainer.innerText = currentScore;\r\n            \r\n    } \r\n        changeColorScore();\r\n        isElementClicked = true;\r\n\r\n        clearInterval(intervalID);\r\n        immediateInterval(runGameIteration,gameIterationDuration);\r\n\r\n    }\r\n \r\nfunction clickOutsideElement(e) {\r\n    if (!e.target.closest(\".item-highlighted\")) {\r\n        currentScore -= clickOutElement;\r\n        scoreContainer.innerText = currentScore;\r\n            \r\n        }\r\n    }\r\n\r\nfunction noClick(){\r\n    if(!isElementClicked){\r\n    currentScore -= missedClick;\r\n    scoreContainer.innerText = currentScore;\r\n       }\r\n    }\r\n\r\n    \r\nfunction changeColorScore(){\r\n       if(currentScore > 0){\r\n        scoreContainer.style.backgroundColor = '#419884'\r\n       } else {\r\n        scoreContainer.style.backgroundColor = '#cc4040'\r\n       }\r\n   }\r\n    \r\n  \r\nfunction activateElement(element) {\r\n  const variant = getVariantForIndex();\r\n  element.classList.add(\"item-highlighted\", variant);\r\n  element.addEventListener('click', clickHandle);\r\n  meshContainer.addEventListener('click',clickOutsideElement);\r\n\r\n\r\n  /**\r\n   * `activateElement` returns a clean-up function that we can later execute to undo any changes made to the active element.\r\n   * It it very convenient to have such function defined immediately, while we still have `variant` and `element` available.\r\n   * A mechanism of returning a function is called \"closure\".\r\n   */\r\n  return function unhighlight() {\r\n    element.classList.remove(\"item-highlighted\", variant);\r\n   \r\n    \r\n  };\r\n}\r\n\r\n/**\r\n * @description This function takes an integer and returns a random integer between 0 and the given number\r\n */\r\nfunction getRandomNumber(max) {\r\n  return Math.floor(Math.random() * 10) % max;\r\n}\r\n\r\n\r\nfunction getVariantForIndex() {\r\n  const variants = [\r\n    \"item-highlighted-1\",\r\n    \"item-highlighted-2\",\r\n    \"item-highlighted-3\",\r\n  ];\r\n  return variants[getRandomNumber(meshSize - 1) % variants.length];\r\n}\r\n\r\n\r\n\r\nfunction stopGame(element)  {\r\n        alert('GAME OVER')\r\n        deactivateElement();\r\n        element.removeEventListener('click',clickHandle);\r\n        meshContainer.removeEventListener('click',clickOutsideElement);\r\n        clearInterval(intervalID);\r\n  \r\n}\r\n"],"names":[],"version":3,"file":"index.816e7b21.js.map","sourceRoot":"/__parcel_source_root/"}